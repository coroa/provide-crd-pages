var Le=Object.defineProperty,Fe=Object.defineProperties;var Be=Object.getOwnPropertyDescriptors;var Se=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable;var Te=(t,e,s)=>e in t?Le(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,De=(t,e)=>{for(var s in e||(e={}))Re.call(e,s)&&Te(t,s,e[s]);if(Se)for(var s of Se(e))We.call(e,s)&&Te(t,s,e[s]);return t},Pe=(t,e)=>Fe(t,Be(e));import{S as ve,i as he,s as le,e as y,t as D,k as z,c as _,a as E,h as P,d as l,m as C,b as f,aj as Ae,g as O,P as o,E as ne,w as Z,x as ee,a3 as Je,y as te,a8 as Qe,j as fe,q as W,o as J,B as se,J as Ne,_ as Xe,n as Ye,p as Ke,U as Ze,N as je,Q as et,T as tt}from"../chunks/index-08858dcd.js";import{q as st,V as Me,l as rt}from"../chunks/store-d40713cf.js";import{l as at,a as ot}from"../chunks/utils-3952ae38.js";import{w as nt}from"../chunks/index-57b0d6bc.js";import{j as it,L as lt,d as ct,b as pt,S as dt,u as ut}from"../chunks/LineTimeSeries-e2264e2a.js";import{q as ft,k as Ve,g as ie}from"../chunks/get-dc35f30d.js";import{i as vt,b as He,v as ht}from"../chunks/_baseMap-5b96295c.js";import"../chunks/theme-store-7b033aac.js";import"../chunks/_arrayReduce-379e7792.js";import"../chunks/init-7803c2a3.js";import"../chunks/singletons-d1fb5791.js";import"../chunks/sortBy-6d8c0258.js";var mt=/\s/;function gt(t){for(var e=t.length;e--&&mt.test(t.charAt(e)););return e}var yt=/^\s+/;function _t(t){return t&&t.slice(0,gt(t)+1).replace(yt,"")}var ze=0/0,bt=/^[-+]0x[0-9a-f]+$/i,wt=/^0b[01]+$/i,Et=/^0o[0-7]+$/i,It=parseInt;function $t(t){if(typeof t=="number")return t;if(ft(t))return ze;if(Ve(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Ve(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=_t(t);var s=wt.test(t);return s||Et.test(t)?It(t.slice(2),s?2:8):bt.test(t)?ze:+t}var Ce=1/0,kt=17976931348623157e292;function xt(t){if(!t)return t===0?t:0;if(t=$t(t),t===Ce||t===-Ce){var e=t<0?-1:1;return e*kt}return t===t?t:0}function St(t){var e=xt(t),s=e%1;return e===e?s?e-s:e:0}function Tt(t){return function(e,s,r){var a=Object(e);if(!vt(e)){var n=He(s);e=ht(e),s=function(c){return n(a[c],c,a)}}var d=t(e,s,r);return d>-1?a[n?e[d]:d]:void 0}}var Dt=Math.max;function Pt(t,e,s){var r=t==null?0:t.length;if(!r)return-1;var a=s==null?0:St(s);return a<0&&(a=Dt(r+a,0)),it(t,He(e),a)}var At=Tt(Pt),ue=At;function Nt(t){let e,s,r,a,n,d,c,i,v,$,m,A,x,T,w,b,h,u,I,V,S,p,g,N,k,j,q,U,G,F,L,B,ce,Q,X,me,pe,R,de;return{c(){e=y("header"),s=y("h4"),r=D("How to start?"),a=z(),n=y("p"),d=D("The "),c=y("b"),i=D("Climate risk dashboard"),v=D(` allows you to explore future impacts from climate
    change as the world warms. Start by picking a mode.`),$=z(),m=y("section"),A=y("div"),x=y("span"),T=D("Impacts"),w=z(),b=y("span"),h=D(`Pick a geography, select one or several scenarios, and explore
      corresponding impacts`),u=z(),I=y("figure"),V=y("img"),p=z(),g=y("a"),N=D("Explore"),k=z(),j=y("section"),q=y("div"),U=y("span"),G=D("Emission scenarios"),F=z(),L=y("span"),B=D(`Select a threshold for a climate impact, explore scenarios under which
      the threshold won't be exceeded`),ce=z(),Q=y("figure"),X=y("img"),pe=z(),R=y("span"),de=D("In development"),this.h()},l(M){e=_(M,"HEADER",{class:!0});var H=E(e);s=_(H,"H4",{class:!0});var ge=E(s);r=P(ge,"How to start?"),ge.forEach(l),a=C(H),n=_(H,"P",{class:!0});var re=E(n);d=P(re,"The "),c=_(re,"B",{});var ye=E(c);i=P(ye,"Climate risk dashboard"),ye.forEach(l),v=P(re,` allows you to explore future impacts from climate
    change as the world warms. Start by picking a mode.`),re.forEach(l),H.forEach(l),$=C(M),m=_(M,"SECTION",{class:!0});var Y=E(m);A=_(Y,"DIV",{});var ae=E(A);x=_(ae,"SPAN",{class:!0});var _e=E(x);T=P(_e,"Impacts"),_e.forEach(l),w=C(ae),b=_(ae,"SPAN",{class:!0});var be=E(b);h=P(be,`Pick a geography, select one or several scenarios, and explore
      corresponding impacts`),be.forEach(l),ae.forEach(l),u=C(Y),I=_(Y,"FIGURE",{class:!0});var we=E(I);V=_(we,"IMG",{src:!0,class:!0}),we.forEach(l),p=C(Y),g=_(Y,"A",{class:!0,href:!0});var Ee=E(g);N=P(Ee,"Explore"),Ee.forEach(l),Y.forEach(l),k=C(M),j=_(M,"SECTION",{class:!0});var K=E(j);q=_(K,"DIV",{});var oe=E(q);U=_(oe,"SPAN",{class:!0});var Ie=E(U);G=P(Ie,"Emission scenarios"),Ie.forEach(l),F=C(oe),L=_(oe,"SPAN",{class:!0});var $e=E(L);B=P($e,`Select a threshold for a climate impact, explore scenarios under which
      the threshold won't be exceeded`),$e.forEach(l),oe.forEach(l),ce=C(K),Q=_(K,"FIGURE",{class:!0});var ke=E(Q);X=_(ke,"IMG",{src:!0,class:!0}),ke.forEach(l),pe=C(K),R=_(K,"SPAN",{class:!0,"aria-disabled":!0});var xe=E(R);de=P(xe,"In development"),xe.forEach(l),K.forEach(l),this.h()},h(){f(s,"class","svelte-1ye7y4n"),f(n,"class","svelte-1ye7y4n"),f(e,"class","svelte-1ye7y4n"),f(x,"class","text-label svelte-1ye7y4n"),f(b,"class","description svelte-1ye7y4n"),Ae(V.src,S="/img/impacts.png")||f(V,"src",S),f(V,"class","svelte-1ye7y4n"),f(I,"class","container svelte-1ye7y4n"),f(g,"class","btn btn--big"),f(g,"href","/explore/impacts"),f(m,"class","path svelte-1ye7y4n"),f(U,"class","text-label svelte-1ye7y4n"),f(L,"class","description svelte-1ye7y4n"),Ae(X.src,me="/img/emission-scenarios.png")||f(X,"src",me),f(X,"class","svelte-1ye7y4n"),f(Q,"class","container svelte-1ye7y4n"),f(R,"class","btn btn--big"),f(R,"aria-disabled","true"),f(j,"class","path disabled svelte-1ye7y4n")},m(M,H){O(M,e,H),o(e,s),o(s,r),o(e,a),o(e,n),o(n,d),o(n,c),o(c,i),o(n,v),O(M,$,H),O(M,m,H),o(m,A),o(A,x),o(x,T),o(A,w),o(A,b),o(b,h),o(m,u),o(m,I),o(I,V),o(m,p),o(m,g),o(g,N),O(M,k,H),O(M,j,H),o(j,q),o(q,U),o(U,G),o(q,F),o(q,L),o(L,B),o(j,ce),o(j,Q),o(Q,X),o(j,pe),o(j,R),o(R,de)},p:ne,i:ne,o:ne,d(M){M&&l(e),M&&l($),M&&l(m),M&&l(k),M&&l(j)}}}class jt extends ve{constructor(e){super(),he(this,e,null,Nt,le,{})}}function Ue(t,e,s){const r=t.slice();return r[15]=e[s],r[17]=s,r}function Mt(t){let e,s;return e=new pt({props:{showcase:!0,data:t[18],unit:t[2].indicator.unit}}),{c(){Z(e.$$.fragment)},l(r){ee(e.$$.fragment,r)},m(r,a){te(e,r,a),s=!0},p(r,a){const n={};a&262144&&(n.data=r[18]),a&4&&(n.unit=r[2].indicator.unit),e.$set(n)},i(r){s||(W(e.$$.fragment,r),s=!0)},o(r){J(e.$$.fragment,r),s=!1},d(r){se(e,r)}}}function Oe(t){let e=t[2].geography.emoji+"",s,r;return{c(){s=D(e),r=D("\xA0")},l(a){s=P(a,e),r=P(a,"\xA0")},m(a,n){O(a,s,n),O(a,r,n)},p(a,n){n&4&&e!==(e=a[2].geography.emoji+"")&&fe(s,e)},d(a){a&&l(s),a&&l(r)}}}function qe(t){let e,s,r,a=t[2].indicator.label+"",n,d,c,i=t[2].geography.label+"",v,$,m,A,x,T,w=t[2].geography.emoji&&Oe(t);return m=new dt({props:{scenarios:t[2].scenarios}}),{c(){e=y("span"),s=D(`How will
                `),r=y("em"),n=D(a),d=D(` in
                `),c=y("em"),w&&w.c(),v=D(i),$=D(`
                develop under the
                `),Z(m.$$.fragment),A=D("?"),this.h()},l(b){e=_(b,"SPAN",{class:!0});var h=E(e);s=P(h,`How will
                `),r=_(h,"EM",{class:!0});var u=E(r);n=P(u,a),u.forEach(l),d=P(h,` in
                `),c=_(h,"EM",{class:!0});var I=E(c);w&&w.l(I),v=P(I,i),I.forEach(l),$=P(h,`
                develop under the
                `),ee(m.$$.fragment,h),A=P(h,"?"),h.forEach(l),this.h()},h(){f(r,"class","svelte-12o0pai"),f(c,"class","svelte-12o0pai"),f(e,"class","svelte-12o0pai"),Je(()=>t[10].call(e))},m(b,h){O(b,e,h),o(e,s),o(e,r),o(r,n),o(e,d),o(e,c),w&&w.m(c,null),o(c,v),o(e,$),te(m,e,null),o(e,A),x=Qe(e,t[10].bind(e)),T=!0},p(b,h){(!T||h&4)&&a!==(a=b[2].indicator.label+"")&&fe(n,a),b[2].geography.emoji?w?w.p(b,h):(w=Oe(b),w.c(),w.m(c,v)):w&&(w.d(1),w=null),(!T||h&4)&&i!==(i=b[2].geography.label+"")&&fe(v,i);const u={};h&4&&(u.scenarios=b[2].scenarios),m.$set(u)},i(b){T||(W(m.$$.fragment,b),T=!0)},o(b){J(m.$$.fragment,b),T=!1},d(b){b&&l(e),w&&w.d(),se(m),x()}}}function Ge(t){let e,s,r,a;function n(){return t[11](t[17])}return{c(){e=y("button"),s=D(t[17]),this.h()},l(d){e=_(d,"BUTTON",{class:!0});var c=E(e);s=P(c,t[17]),c.forEach(l),this.h()},h(){f(e,"class","svelte-12o0pai"),Ne(e,"active",t[1]===t[17])},m(d,c){O(d,e,c),o(e,s),r||(a=Xe(e,"click",n),r=!0)},p(d,c){t=d,c&2&&Ne(e,"active",t[1]===t[17])},d(d){d&&l(e),r=!1,a()}}}function Vt(t){let e,s,r,a,n,d,c,i,v,$=t[2],m,A,x,T,w,b,h,u;r=new lt({props:{asyncProps:{data:t[5]},props:{currentStory:t[2]},process:t[4],$$slots:{default:[Mt,({asyncProps:{data:p},props:{currentStory:g}})=>({18:p,2:g}),({asyncProps:p,props:g})=>(p?262144:0)|(g?4:0)]},$$scope:{ctx:t}}});let I=qe(t),V=t[0],S=[];for(let p=0;p<V.length;p+=1)S[p]=Ge(Ue(t,V,p));return{c(){e=y("div"),s=y("div"),Z(r.$$.fragment),a=z(),n=y("div"),d=y("div"),c=y("ul"),i=y("li"),v=y("div"),I.c(),A=z(),x=y("a"),T=D("Explore"),b=z(),h=y("div");for(let p=0;p<S.length;p+=1)S[p].c();this.h()},l(p){e=_(p,"DIV",{class:!0});var g=E(e);s=_(g,"DIV",{class:!0});var N=E(s);ee(r.$$.fragment,N),N.forEach(l),a=C(g),n=_(g,"DIV",{class:!0});var k=E(n);d=_(k,"DIV",{class:!0});var j=E(d);c=_(j,"UL",{class:!0});var q=E(c);i=_(q,"LI",{class:!0});var U=E(i);v=_(U,"DIV",{class:!0,style:!0});var G=E(v);I.l(G),G.forEach(l),A=C(U),x=_(U,"A",{class:!0,href:!0});var F=E(x);T=P(F,"Explore"),F.forEach(l),U.forEach(l),q.forEach(l),j.forEach(l),b=C(k),h=_(k,"DIV",{class:!0});var L=E(h);for(let B=0;B<S.length;B+=1)S[B].l(L);L.forEach(l),k.forEach(l),g.forEach(l),this.h()},h(){f(s,"class","background svelte-12o0pai"),f(v,"class","story-wrapper svelte-12o0pai"),f(v,"style",m=`height: ${t[3]}px;`),f(x,"class","story-link btn svelte-12o0pai"),f(x,"href",w=t[2].url),f(i,"class","story svelte-12o0pai"),f(c,"class","svelte-12o0pai"),f(d,"class","stories-wrapper svelte-12o0pai"),f(h,"class","stories-nav svelte-12o0pai"),f(n,"class","wrapper grid"),f(e,"class","stories container svelte-12o0pai")},m(p,g){O(p,e,g),o(e,s),te(r,s,null),o(e,a),o(e,n),o(n,d),o(d,c),o(c,i),o(i,v),I.m(v,null),o(i,A),o(i,x),o(x,T),o(n,b),o(n,h);for(let N=0;N<S.length;N+=1)S[N].m(h,null);u=!0},p(p,[g]){const N={};if(g&32&&(N.asyncProps={data:p[5]}),g&4&&(N.props={currentStory:p[2]}),g&16&&(N.process=p[4]),g&786436&&(N.$$scope={dirty:g,ctx:p}),r.$set(N),g&4&&le($,$=p[2])?(Ye(),J(I,1,1,ne),Ke(),I=qe(p),I.c(),W(I,1),I.m(v,null)):I.p(p,g),(!u||g&8&&m!==(m=`height: ${p[3]}px;`))&&f(v,"style",m),(!u||g&4&&w!==(w=p[2].url))&&f(x,"href",w),g&259){V=p[0];let k;for(k=0;k<V.length;k+=1){const j=Ue(p,V,k);S[k]?S[k].p(j,g):(S[k]=Ge(j),S[k].c(),S[k].m(h,null))}for(;k<S.length;k+=1)S[k].d(1);S.length=V.length}},i(p){u||(W(r.$$.fragment,p),W(I),u=!0)},o(p){J(r.$$.fragment,p),J(I),u=!1},d(p){p&&l(e),se(r),I.d(p),Ze(S,p)}}}function zt(t,e,s){let r,a,n,d,{stories:c}=e,i=nt([]);je(t,i,u=>s(5,d=u));let v=0,$;const m=et("theme");je(t,m,u=>s(9,n=u));const A=setInterval(x,4e3);function x(){const u=v===c.length-1?0:v+1;T(u)}function T(u){s(1,v=u)}function w(u){clearInterval(A),T(u)}function b(){$=this.clientHeight,s(3,$)}const h=u=>w(u);return t.$$set=u=>{"stories"in u&&s(0,c=u.stories)},t.$$.update=()=>{t.$$.dirty&515&&s(2,r=(()=>{const u=ie(c,v);return u.scenarios=u.scenarios.map((I,V)=>Pe(De({},I),{color:n.color.scenarios[V]})),u})()),t.$$.dirty&4&&ct(i,r.scenarios.map(u=>({endpoint:st,params:{geography:r.geography.uid,indicator:r.indicator.uid,scenario:u.uid}})))},s(4,a=({data:u},{currentStory:I})=>({data:u.map((S,p)=>{const{yearStart:g,yearStep:N,data:k,model:j,parameters:q}=S.data,U=k[I.indicator.uid];return{color:I.scenarios[p].color,yearStart:g,yearStep:N,parameters:q,model:j,values:U.map((G,F)=>({min:G[0],value:G[1],max:G[2],year:g+N*F}))}})})),[c,v,r,$,a,d,i,m,w,n,b,h]}class Ct extends ve{constructor(e){super(),he(this,e,zt,Vt,le,{stories:0})}}function Ut(t){let e,s,r,a,n,d,c;return s=new Ct({props:{stories:t[0]}}),d=new jt({}),{c(){e=z(),Z(s.$$.fragment),r=z(),a=y("div"),n=y("div"),Z(d.$$.fragment),this.h()},l(i){tt('[data-svelte="svelte-cn5gp9"]',document.head).forEach(l),e=C(i),ee(s.$$.fragment,i),r=C(i),a=_(i,"DIV",{class:!0});var $=E(a);n=_($,"DIV",{class:!0});var m=E(n);ee(d.$$.fragment,m),m.forEach(l),$.forEach(l),this.h()},h(){document.title="Provide Project",f(n,"class","wrapper grid"),f(a,"class","paths container svelte-1jjvhl9")},m(i,v){O(i,e,v),te(s,i,v),O(i,r,v),O(i,a,v),o(a,n),te(d,n,null),c=!0},p(i,[v]){const $={};v&1&&($.stories=i[0]),s.$set($)},i(i){c||(W(s.$$.fragment,i),W(d.$$.fragment,i),c=!0)},o(i){J(s.$$.fragment,i),J(d.$$.fragment,i),c=!1},d(i){i&&l(e),se(s,i),i&&l(r),i&&l(a),se(d)}}}const Zt=async({fetch:t})=>{const e=await at(t),s=await ot("stories",t);return{props:{stories:Me(s.map(({attributes:a})=>{const{Indicator:n,Type:d,GeographyType:c,Geography:i,Scenarios:v}=a;let $=i.trim(),m=n.trim(),A=c.trim();const x=ue(ie(e,[A],[]),{uid:$}),T=ue(ie(e,"indicators",[]),{uid:m}),w=ut(v.map(({UID:h})=>h.trim())),b=Me(w.map(h=>ue(ie(e,"scenarios",[]),{uid:h}))).slice(0,3);if(x&&T&&b.length){const h=rt.stringify({indicator:m,geography:$,scenarios:w},{encodeValuesOnly:!0});return{geography:x,indicator:T,scenarios:b,url:`explore/${d}?${h}`}}else return!1}))}}};function Ot(t,e,s){let{stories:r}=e;return t.$$set=a=>{"stories"in a&&s(0,r=a.stories)},[r]}class es extends ve{constructor(e){super(),he(this,e,Ot,Ut,le,{stories:0})}}export{es as default,Zt as load};
